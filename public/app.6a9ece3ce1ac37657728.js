!function(e){var t={};function i(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=1)}([function(e,t,i){},function(e,t,i){"use strict";i.r(t);i(0);function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var r=function(e){return e*Math.PI/180},o=new(function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.groundColor="#9f8cfc",this.coneColor="#7f79f0",this.spotLightColor="#ffffff",this.ambientLightColor="#ffffff",this.innerTubeColor="#293b8e",this.ground={},this.groupCones=new THREE.Object3D,this.tiles=[],this.radius=.5,this.angle=0,this.gridSize=12,this.cols=this.gridSize,this.rows=this.gridSize,this.gui=new dat.GUI,this.amplitude=0,this.frequency=2,this.wavelength=0,this.speed=6e3,this.position=10,this.init();var i=this.gui.addFolder("Wave");i.add(this,"amplitude",-4,4).onChange((function(e){t.amplitude=e})),i.add(this,"wavelength",-200,200).onChange((function(e){t.wavelength=e})),i.add(this,"frequency",0,20).onChange((function(e){t.frequency=e}))}var t,i,o;return t=e,(i=[{key:"drawWave",value:function(){for(var e=0;e<this.cols;e++)for(var t=0;t<this.rows;t++){var i=this.distance(t,e,-this.rows,-this.cols),n=this.map(i,-this.wavelength,200,-140,this.wavelength),r=this.angle+n,o=this.map(Math.sin(r),-1,1,-4,this.amplitude);this.tiles[e][t].position.y=o}this.angle-=this.frequency/50}},{key:"addPointLight",value:function(e){var t=new THREE.PointLight(e.color,e.intensity);t.position.set(e.position.x,e.position.y,e.position.z),this.scene.add(t)}},{key:"init",value:function(){this.createScene(),this.createCamera(),this.addAmbientLight(this.ambientLightColor),this.addSpotLight(new THREE.SpotLight(this.spotLightColor),600,1e3,-600),this.addCameraControls(),this.floorShape=this.createShape(),this.ground=this.createGround(this.floorShape),this.spheres=[],this.pointLightObj={color:"#6900ff",intensity:4,position:{x:0,y:29,z:29}},this.addPointLight(this.pointLightObj),this.animate()}},{key:"createScene",value:function(){this.scene=new THREE.Scene,this.renderer=new THREE.WebGLRenderer({antialias:!0,alpha:!0}),this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=THREE.PCFSoftShadowMap,document.body.appendChild(this.renderer.domElement)}},{key:"createCamera",value:function(){this.camera=new THREE.PerspectiveCamera(25,window.innerWidth/window.innerHeight,1,1e3),this.camera.position.set(30,30,-30),this.scene.add(this.camera)}},{key:"addCameraControls",value:function(){this.controls=new THREE.OrbitControls(this.camera,this.renderer.domElement),this.controls.maxPolarAngle=r(50)}},{key:"addSpotLight",value:function(e,t,i,n){this.spotLight=e,this.spotLight.position.set(t,i,n),this.spotLight.castShadow=!0,this.scene.add(this.spotLight)}},{key:"addAmbientLight",value:function(e){var t=new THREE.AmbientLight(e,1);this.scene.add(t)}},{key:"addGrid",value:function(){var e=new THREE.GridHelper(25,25);e.position.set(0,0,0),e.material.opacity=1,e.material.transparent=!0,this.scene.add(e)}},{key:"createShape",value:function(){var e=[new THREE.Vector2(-200,200),new THREE.Vector2(-200,-200),new THREE.Vector2(200,-200),new THREE.Vector2(200,200)],t=new THREE.Shape(e);t.autoClose=!0;var i=new THREE.CylinderGeometry(.4,.4,8,59);return this.materialCone=new THREE.MeshPhongMaterial({color:this.coneColor,flatShading:THREE.FlatShading,side:THREE.DoubleSide}),this.createHoles(t,{geometry:i,material:this.materialCone}),this.groupCones.receiveShadow=!0,this.scene.add(this.groupCones),t}},{key:"createHoles",value:function(e,t){for(var i=this,n=function(e){return-e*i.radius},r=0;r<this.cols;r++){this.tiles[r]=[];for(var o=0;o<this.rows;o++){var a=new THREE.Path,s=n(r),h=n(o);a.moveTo(s,h),a.ellipse(s,h,this.radius,this.radius,0,2*Math.PI),a.autoClose=!0,e.holes.push(a),this.tiles[r][o]=this.createCone(t.geometry,t.material),this.tiles[r][o].position.set(s-r*this.radius,0,h-o*this.radius),this.groupCones.add(this.tiles[r][o])}}this.groupCones.position.set(5,0,5)}},{key:"createGround",value:function(e){var t=[new THREE.MeshBasicMaterial({color:this.groundColor}),new THREE.MeshPhongMaterial({color:this.innerTubeColor,flatShading:THREE.FlatShading,side:THREE.DoubleSide})],i=new THREE.ExtrudeGeometry(e,{steps:1,depth:4,bevelEnabled:!1}),n=new THREE.Mesh(i,t);return n.rotation.set(.5*Math.PI,0,0),n.material.needsUpdate=!0,n.position.set(5,0,5),n.receiveShadow=!0,this.scene.add(n),n}},{key:"distance",value:function(e,t,i,n){return Math.sqrt(Math.pow(e-i,2)+Math.pow(t-n,2))}},{key:"createCone",value:function(e,t){var i=new THREE.SphereGeometry(.4,32,32,0,3.2,0,3.2),n=new THREE.Mesh(i,this.materialCone);n.position.y=4,n.rotation.x=r(-90);var o=new THREE.Mesh(e,t);o.position.y=0;var a=new THREE.Object3D;return o.add(n),a.add(o),a.size=0,a}},{key:"animate",value:function(){this.controls.update(),this.renderer.render(this.scene,this.camera),this.drawWave(),requestAnimationFrame(this.animate.bind(this))}},{key:"map",value:function(e,t,i,n,r){return(e-t)/(i-t)*(r-n)+n}},{key:"onResize",value:function(){var e=window.innerWidth,t=window.innerHeight;this.camera.aspect=e/t,this.camera.updateProjectionMatrix(),this.renderer.setSize(e,t)}}])&&n(t.prototype,i),o&&n(t,o),e}());window.addEventListener("resize",o.onResize.bind(o))}]);